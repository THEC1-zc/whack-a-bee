Original prompt: end game: aggiungiamo pulsante share to farcaster, che pubblicherÃ  un post con testo preimpostato: I just ended a game on Whack-a-bee by @Thec1, I entered a [GAME_FEE] game, had a [END_GAME_%] and won [BF_prize] and [ticket] tickets for the weekly pot! can you do better? allega endgamepagescreenshot e framecon link alla app

- Added share image endpoint `/api/share-image` (next/og) and wired share button to use it and app URL embeds.
- Fixed OG rendering constraints (display: flex requirement).
- Moved Play button above butterfly types.
- End game now requires manual Back to exit; added Farcaster icon on Share button.
- Share image layout scaled down for mobile view.
- Payment error text shortened to avoid huge blocks.
- Cap now affects max points and spawn density (not prize multiplier).
- Playwright smoke run completed (home screen render).
- Debug payout retry issue: screenshot showed "Network busy. Please try again later." (mapped from underpriced/nonce errors).
- Updated `/app/api/payout/route.ts` to send transfers with explicit `pending` nonce and retry (max 3) on retryable nonce/underpriced errors before failing.
- Preserved CORS/OPTIONS handling and payout API contract; checked touched file with `npx eslint app/api/payout/route.ts`.
- Moved weekly tickets UX to home: added "My Tickets" card in `/components/App.tsx` with counter (pending/claimed), connect-wallet CTA, and claim action.
- Home now fetches `/api/weekly/my` for connected users and calls `/api/weekly/claim` directly from the card.
- Removed ticket claim/counter section from `/app/weekly/page.tsx`; weekly page now focuses on pot rules and countdown only.
- Weekly payout reliability/automation pass:
  - Added weekly config storage in `lib/weekly.ts` (`autoPayoutEnabled`, `forceBypassSchedule`, `autoClaimPendingTickets`).
  - Added payout log retrieval (`getWeeklyPayoutLog`) and payout completion marker (`lastPayoutAt`).
  - Added pending->claimed merge helper so payout can include unclaimed tickets.
  - Refactored `/api/admin/weekly-payout` to support force mode, auto mode, auto-claim pending tickets, and explicit reset verification payload.
  - Added `/api/admin/weekly-config` API for admin toggles + payout log.
  - Added `/api/cron/weekly-payout` endpoint (secret-protected) to trigger automatic payout via cron.
  - Extended `/app/admin/page.tsx` with Force Payout, Run Auto, weekly automation toggles, and recent payout log preview.
- Added full weekly payout hardening package:
  - Redis/memory payout lock (idempotency) to prevent concurrent weekly executions.
  - Full payout history store (`weekly:payout:history`) and per-week logs with status and transfer-level details.
  - Partial-failure handling in `/api/admin/weekly-payout`: logs + snapshot status, no weekly/leaderboard reset on partial failure.
  - New admin API `/api/admin/weekly-payouts` for detailed payout reporting rows.
  - New admin subpage `/admin/payouts` with week/user-wallet/amount/txhash/status listing.
  - Added `vercel.json` cron schedule for `/api/cron/weekly-payout`.
- Admin buttons responsiveness fix for Farcaster miniapp:
  - Removed blocking `confirm()` dependency for weekly actions (often invisible in embed context).
  - Added visible status feedback (`info`) for run/reset actions.
  - Added explicit `Content-Type: application/json` on weekly payout POST.
- Admin button interaction hardening in miniapp:
  - Added explicit `type="button"` to weekly action buttons.
  - Added immediate `onPointerDown` status feedback to prove tap/click is received.
  - Added per-action running state labels (`Paying...`, `Reset...`) for visibility.
- Added visible Admin build stamp line: `Build: 2026-02-23-c11925e` (fallback via `NEXT_PUBLIC_BUILD_STAMP`).
- Added Home share CTA in `/components/App.tsx`:
  - New button: "Share app to Farcaster" under title.
  - Uses `sdk.actions.composeCast` with app embed URL.
  - Added small UI error feedback if compose fails.
